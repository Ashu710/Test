package prime

import scala.io.Source.stdin
import com.workday.montague.ccg.{CcgCat, NP, S}
import com.workday.montague.semantics.{Form, SemanticState, identity, Î»}
import io.circe._, io.circe.parser._
import io.circe.syntax._
import io.circe.generic.auto._
import io.circe.generic.JsonCodec




/**
  * Created by prime on 16/3/17.
  */
object test {

  def main(args: Array[String]): Unit = {
    print(">> ")

  /*
    Parsing Filter options JSON
  * val json = """{"reputatationValues":null,"resendMailData":null,"status":"SUCCESS","responseCode":"200","responseMsg":"Data Retreived Successfully","error":null,"filterList":[{"id":null,"displayName":"Date Range","name":"Date Range","type":"enddate","hasDependency":null,"dependentFilters":null,"isDependent":null,"selectedOption":null,"isCrossFilter":null,"scrollable":null,"options":[{"stringId":null,"startDate":"2017-03-24","endDate":"2017-04-23","year":null}],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Event Category","name":"Event Category","type":"single","hasDependency":true,"dependentFilters":null,"isDependent":false,"selectedOption":"1","isCrossFilter":null,"scrollable":true,"options":[{"id":4,"stringId":null,"name":"Account","year":null},{"id":1,"stringId":null,"name":"Global Events","year":null},{"id":2,"stringId":null,"name":"Group","year":null},{"id":3,"stringId":null,"name":"Project","year":null}],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Group","name":"Group","type":"multiple","hasDependency":false,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Project","name":"Project","type":"multiple","hasDependency":false,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Account","name":"Account","type":"multiple","hasDependency":false,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Event Type","name":"EventType","type":"single","hasDependency":true,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[{"id":54,"stringId":null,"name":"Celebrations","year":null},{"id":39,"stringId":null,"name":"Conference","year":null},{"id":55,"stringId":null,"name":"Corporate Events","year":null},{"id":34,"stringId":null,"name":"Training","year":null},{"id":40,"stringId":null,"name":"Workshop","year":null}],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Event SubType","name":"EventSubType","type":"single","hasDependency":true,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Subscriptions","name":"Subscriptions","type":"single","hasDependency":false,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"IRC Event Category","name":"IRC Event Category","type":"multiple","hasDependency":false,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Maitree Event Category","name":"Maitree Event Category","type":"multiple","hasDependency":false,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Region","name":"region","type":"single","hasDependency":true,"dependentFilters":null,"isDependent":false,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[{"id":18476,"stringId":null,"name":"Argentina","year":null},{"id":18093,"stringId":null,"name":"Australia","year":null},{"id":16562,"stringId":null,"name":"Austria","year":null},{"id":18175,"stringId":null,"name":"Bahrain","year":null},{"id":18331,"stringId":null,"name":"Belgium","year":null},{"id":18454,"stringId":null,"name":"Botswana","year":null},{"id":18478,"stringId":null,"name":"Brazil","year":null},{"id":19898,"stringId":null,"name":"Canada","year":null},{"id":18484,"stringId":null,"name":"Chile","year":null},{"id":18115,"stringId":null,"name":"China","year":null},{"id":17650,"stringId":null,"name":"Colombia","year":null},{"id":18328,"stringId":null,"name":"Denmark","year":null},{"id":18489,"stringId":null,"name":"Ecuador","year":null},{"id":18349,"stringId":null,"name":"Finland","year":null},{"id":18351,"stringId":null,"name":"France","year":null},{"id":18356,"stringId":null,"name":"Germany","year":null},{"id":18121,"stringId":null,"name":"Hong Kong","year":null},{"id":18387,"stringId":null,"name":"Hungary","year":null},{"id":17935,"stringId":null,"name":"India","year":null},{"id":18119,"stringId":null,"name":"Indonesia","year":null},{"id":18216,"stringId":null,"name":"Ireland","year":null},{"id":18391,"stringId":null,"name":"Italy","year":null},{"id":18123,"stringId":null,"name":"Japan","year":null},{"id":18184,"stringId":null,"name":"Kuwait","year":null},{"id":18404,"stringId":null,"name":"Luxembourg","year":null},{"id":18140,"stringId":null,"name":"Malaysia","year":null},{"id":18467,"stringId":null,"name":"Mexico","year":null},{"id":18406,"stringId":null,"name":"Morocco","year":null},{"id":18408,"stringId":null,"name":"Netherlands","year":null},{"id":18147,"stringId":null,"name":"New Zealand","year":null},{"id":18425,"stringId":null,"name":"Norway","year":null},{"id":18499,"stringId":null,"name":"Peru","year":null},{"id":18154,"stringId":null,"name":"Philippines","year":null},{"id":18474,"stringId":null,"name":"Portugal","year":null},{"id":18196,"stringId":null,"name":"Qatar","year":null},{"id":18198,"stringId":null,"name":"Saudi Arabia","year":null},{"id":18161,"stringId":null,"name":"Singapore","year":null},{"id":18460,"stringId":null,"name":"South Africa","year":null},{"id":18160,"stringId":null,"name":"South Korea","year":null},{"id":18471,"stringId":null,"name":"Spain","year":null},{"id":18437,"stringId":null,"name":"Sweden","year":null},{"id":14108,"stringId":null,"name":"Switzerland","year":null},{"id":18166,"stringId":null,"name":"Taiwan","year":null},{"id":18171,"stringId":null,"name":"Thailand","year":null},{"id":21985,"stringId":null,"name":"United Arab Emirates","year":null},{"id":18210,"stringId":null,"name":"United Kingdom","year":null},{"id":18504,"stringId":null,"name":"Uruguay","year":null},{"id":21981,"stringId":null,"name":"USA","year":null}],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Cities","name":"cities","type":"multiple","hasDependency":false,"dependentFilters":null,"isDependent":false,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Apps","name":"Apps","type":"single","hasDependency":true,"dependentFilters":null,"isDependent":false,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[{"id":47,"stringId":null,"name":"D & I","year":null},{"id":37,"stringId":null,"name":"Hub","year":null},{"id":38,"stringId":null,"name":"iBelong","year":null}],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Initiatives","name":"Initiatives","type":"multiple","hasDependency":false,"dependentFilters":null,"isDependent":true,"selectedOption":null,"isCrossFilter":null,"scrollable":true,"options":[],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null},{"id":null,"displayName":"Tags","name":"tags","type":"multiple","hasDependency":null,"dependentFilters":null,"isDependent":null,"selectedOption":null,"isCrossFilter":null,"scrollable":null,"options":[{"id":33,"stringId":null,"name":"java","year":null},{"id":13364,"stringId":null,"name":"Selenium","year":null}],"crossFilters":null,"searchableRequest":null,"notDeletable":false,"workspaceType":null,"workspaceId":null,"createdBy":null,"lazyLoad":false,"tabName":null,"description":null,"notApplicable":false,"totalCount":null}],"userTaggedLocation":null,"initiativeList":null,"userDeputedLocation":null}"""
  * val output = parse(json).right.get.\\("filterList")(0).asArray.get(0)
  * */


    for(line <- stdin.getLines()){

      val chn = Location("chennai")
      LexiconOps.injectLexicon(Location("chennai"))
      LexiconOps.injectLexicon(Location("bangalore"))
      LexiconOps.injectLexicon(Location("mumbai"))
      LexiconOps.injectLexicon(DateString("this week"))
      LexiconOps.injectLexicon(DateString("this month"))
      LexiconOps.injectLexicon(DateString("today"))
      LexiconOps.injectLexicon(Date("02/03/1990"))
      LexiconOps.injectLexicon(Date("1st"))
      LexiconOps.injectLexicon(Date("2nd"))
      LexiconOps.injectLexicon(SearchString("oracle"))

      println(jsonOps.primeEvent.asJson.noSpaces.replace("\"Type\":","\"type\":"))

      //((chn.value) -> (NP,Form(chn):SemanticState))
      //val output = preProcess.parseSentence(preProcess.modelLocation,line);
      val parsedLine = parser.parse(line);
      val output = parser.customParser(parsedLine)
   //   parser.parse(line).bestParse
      router.route(output)
      print(">> ")
    }
  }

}
